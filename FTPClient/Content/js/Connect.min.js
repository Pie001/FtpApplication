"use strict";$(function(){_loading.init();_connectionConfig.init();_commonModal.init();_copyHostModal.init()});var _loading={$me:null,init:function(){this.$me=$(".loading")}},_copyHostModal={$me:null,init:function(){this.$me=$("#modal_copy_host");this.form.init();this.btnOK.init();this.masterHostName.init()},form:{$me:null,init:function(){this.$me=$("#form_copy_host")},getSerializeArray:function(){return this.$me.serializeArray()},isValid:function(){return this.$me.validate().form()}},masterHostName:{$me:null,init:function(){this.$me=$(".master-host-name")}},show:function(){_copyHostModal.masterHostName.$me.empty();_copyHostModal.masterHostName.$me.append("ホスト名「"+_connectionConfig.hostMain.listBlock.getHostItemName(_connectionConfig.selectedHostId)+"」をコピーします。");this.$me.find('input[name="NewHostName"]').val("");this.$me.modal("show")},hide:function(){this.$me.modal("hide")},btnOK:{$me:null,init:function(){this.$me=$("#btn_copy_host_submit");this.click()},click:function(){this.$me.click(function(){_loading.$me.fadeIn();var n=_copyHostModal.form.getSerializeArray();return n.push({name:"selectHostId",value:_connectionConfig.selectedHostId}),_ajax.call("POST","/BGHost/CopyHost",n,function(n){n!=null&&n.Result=="success"&&(_connectionConfig.hostMain.listBlock.addNewHostItem(n),typeof _ftpControlBlock!="undefined"&&_ftpControlBlock.hostMenuBlock.reset(),$(".host-main").animate({scrollTop:0},400),_copyHostModal.hide(),_loading.$me.fadeOut())},!0),!1})}}},_commonModal={$me:null,isNew:!1,init:function(){this.$me=$("#modal_edit_host");this.form.init();this.btnOk.init();this.btnConnectTest.init();this.connectTestResult.init();this.title.init();this.hostSettiesBlock.init();this.btnHostSettings.init();this.inputHostName.init();this.inputHostAddress.init();this.inputPortNumber.init();this.inputUserName.init();this.inputPassword.init();this.inputTimeout.init();this.inputAnonymous.init();this.inputPasvMode.init();this.inputLocalServerPath.init();this.inputRemoteServerPath.init()},resetForm:function(n){$('input[class="input-validation-error"]').val("");$("input").removeClass("input-validation-error");$('span[class="field-validation-error"]').empty();_commonModal.title.$me.empty();_commonModal.title.$me.prepend('<i class="icon-plus-3"><\/i> '+(n?"New":"Edit"));_commonModal.connectTestResult.$me.css("display","none");_commonModal.connectTestResult.$me.empty();this.hostSettiesBlock.hide();this.btnHostSettings.changeIconClass("icon-down-open-3","icon-right-open-4")},show:function(n){this.isNew=n;this.resetForm(n);this.$me.modal("show")},hide:function(){this.$me.modal("hide")},form:{$me:null,init:function(){this.$me=$("#form_edit_host")},getSerializeArray:function(){return this.$me.serializeArray()},isValid:function(){return this.$me.validate().form()}},btnOk:{$me:null,init:function(){this.$me=$("#btn_edit_ok");this.click()},click:function(){this.$me.click(function(){var i=_commonModal.form.isValid(),t=!1,n;return i&&(_loading.$me.fadeIn(),n=_commonModal.form.getSerializeArray(),_commonModal.isNew?_ajax.call("POST","/BGHost/AddHost",n,function(n){n!=null&&n.Result=="success"&&(_connectionConfig.hostMain.listBlock.addNewHostItem(n),t=!0)},!0):(n.push({name:"HostID",value:_connectionConfig.selectedHostId}),_ajax.call("POST","/BGHost/EditHost",n,function(n){n!=null&&n.Result=="success"&&(_connectionConfig.hostMain.listBlock.editHostItem(n),t=!0)},!0)),t&&(typeof _ftpControlBlock!="undefined"&&_ftpControlBlock.hostMenuBlock.reset(),_commonModal.isNew&&$(".host-main").animate({scrollTop:0},400),_commonModal.hide(),_loading.$me.fadeOut())),!1})}},btnConnectTest:{$me:null,init:function(){this.$me=$("#btn_connect_test");this.click()},click:function(){this.$me.click(function(){var t=_commonModal.form.isValid(),n;t&&(_loading.$me.fadeIn(),n=_commonModal.form.getSerializeArray(),_ajax.call("POST","/BGHost/ConnectTest",n,function(n){n!=null&&n.Result=="success"?(_commonModal.connectTestResult.$me.empty(),_commonModal.connectTestResult.$me.prepend("<span>【OK】Connection parameters are correct.<\/span>"),_commonModal.connectTestResult.$me.css("display","block")):(_commonModal.connectTestResult.$me.empty(),_commonModal.connectTestResult.$me.prepend('<span class="connect-test-ng">【NG】Faild to Connect to FTP.<\/span>'),_commonModal.connectTestResult.$me.css("display","block"))},!1),_loading.$me.fadeOut())})}},connectTestResult:{$me:null,init:function(){this.$me=$(".connect-test-result")}},title:{$me:null,init:function(){this.$me=_commonModal.$me.find("div.modal-header label.title")}},hostSettiesBlock:{$me:null,init:function(){this.$me=$("#host_add_option")},hide:function(){this.$me.hide()}},btnHostSettings:{$me:null,init:function(){this.$me=$("#btn_host_settings");this.click()},click:function(){this.$me.click(function(){var t="icon-right-open-4",i="icon-down-open-3",n=_commonModal.btnHostSettings.$me.find("i:first");return n.hasClass(t)?(_commonModal.hostSettiesBlock.$me.slideDown(),n.removeClass(t),n.addClass(i)):(_commonModal.hostSettiesBlock.$me.slideUp(),n.removeClass(i),n.addClass(t)),!1})},changeIconClass:function(n,t){var i=this.$me.find("i:first");i.hasClass(n)&&(i.removeClass(n),i.addClass(t))}},inputHostName:{$me:null,init:function(){this.$me=$("#HostName")}},inputHostAddress:{$me:null,init:function(){this.$me=$("#HostAddress")}},inputPortNumber:{$me:null,init:function(){this.$me=$("#PortNumber")}},inputUserName:{$me:null,init:function(){this.$me=$("#UserName")}},inputPassword:{$me:null,init:function(){this.$me=$("#Password")}},inputTimeout:{$me:null,init:function(){this.$me=$("#Timeout")}},inputAnonymous:{$me:null,init:function(){this.$me=$("#Anonymous")}},inputPasvMode:{$me:null,init:function(){this.$me=$("#PasvMode")}},inputLocalServerPath:{$me:null,init:function(){this.$me=$("#LocalServerPath")}},inputRemoteServerPath:{$me:null,init:function(){this.$me=$("#RemoteServerPath")}},resetInputValues:function(){_commonModal.inputHostName.$me.val("");_commonModal.inputHostAddress.$me.val("");_commonModal.inputPortNumber.$me.val("21");_commonModal.inputUserName.$me.val("");_commonModal.inputPassword.$me.val("");_commonModal.inputTimeout.$me.val("6000");_commonModal.inputAnonymous.$me.attr("checked",!1);_commonModal.inputPasvMode.$me.attr("checked",!0);_commonModal.inputLocalServerPath.$me.val("");_commonModal.inputRemoteServerPath.$me.val("");_connectionConfig.hostMain.listBlock.clickHostItem()},setInputValues:function(n){_commonModal.inputHostName.$me.val(n.ResponseData.hostName);_commonModal.inputHostAddress.$me.val(n.ResponseData.hostAddress);_commonModal.inputPortNumber.$me.val(n.ResponseData.portNumber);_commonModal.inputUserName.$me.val(n.ResponseData.userName);_commonModal.inputPassword.$me.val(n.ResponseData.password);_commonModal.inputTimeout.$me.val(n.ResponseData.timeout);_commonModal.inputLocalServerPath.$me.val(n.ResponseData.localServerPath);_commonModal.inputRemoteServerPath.$me.val(n.ResponseData.remoteServerPath);n.ResponseData.anonymous=="True"?_commonModal.inputAnonymous.$me.attr("checked",!0):_commonModal.inputAnonymous.$me.attr("checked",!1);n.ResponseData.pasvMode=="True"?_commonModal.inputPasvMode.$me.attr("checked",!0):_commonModal.inputPasvMode.$me.attr("checked",!1);_connectionConfig.hostMain.listBlock.clickHostItem()}},_connectionConfig={$me:null,selectedHostId:null,init:function(){this.$me=$("#block_conection_config");this.form.init();this.hostMain.init();this.btnNewHost.init();this.btnEditHost.init();this.btnCopyHost.init();this.btnRemoveHost.init();this.btnConnect.init()},form:{$me:null,init:function(){this.$me=$("#form_host_settings")},getSerializeArray:function(){return this.$me.serializeArray()}},hostMain:{$me:null,init:function(){this.$me=$(".host-main");this.listBlock.init()},listBlock:{$me:null,init:function(){this.$me=$("#host_list_block");this.clickHostItem()},clickHostItem:function(){var n=this.$me.find("li");n.click(function(){var t=n.index(this),i;return n.removeClass("host-list-select"),n.eq(t).addClass("host-list-select"),i=n.eq(t).attr("data-hostid"),_connectionConfig.selectedHostId=i,_connectionConfig.activateAllBtn(!0),!1});this.$me.sortable({update:function(){var t=[],i,r=0,n;$.each(_connectionConfig.hostMain.listBlock.$me.find("li"),function(n,u){i=$(u).attr("data-hostid");var f=[i,r];t.push(f);r++});n=_connectionConfig.form.getSerializeArray();n.push({name:"hostList",value:t.join(":")});_ajax.call("POST","/BGHost/SortHost",n,function(n){n!=null&&n.Result=="success"&&typeof _ftpControlBlock!="undefined"&&_ftpControlBlock.hostMenuBlock.reset()},!0)}});this.$me.disableSelection()},checkHostItem:function(n){if(n==""&&n!=null)return!1;var t=this.$me.find("li[data-hostid="+n+"]").text();return t!=""&&t!=null?!0:!1},getHostItemName:function(n){return this.$me.find("li[data-hostid="+n+"]").text()},addNewHostItem:function(n){$.each(_connectionConfig.hostMain.listBlock.$me.find("li"),function(n,t){$(t).removeClass("host-list-select")});this.$me.prepend('<li data-hostid="'+n.ResponseData.hostId+'" class="host-list-select"><i class="icon-monitor"><\/i> '+n.ResponseData.hostName+"<\/li>");_connectionConfig.selectedHostId=n.ResponseData.hostId;_connectionConfig.activateAllBtn(!0);_connectionConfig.hostMain.listBlock.clickHostItem()},editHostItem:function(n){var t=_connectionConfig.hostMain.listBlock.getHostItemObject(n.ResponseData.hostId);t.empty();t.append('<i class="icon-monitor"><\/i> '+n.ResponseData.hostName);_connectionConfig.hostMain.listBlock.clickHostItem()},getHostItemObject:function(n){return this.$me.find("li[data-hostid="+n+"]")},getHostItemValues:function(n){var t;return _ajax.call("GET","/BGHost/HostItem","hostId="+n,function(n){n!=null&&n.Result=="success"&&(t=n)},!0),t}}},btnNewHost:{$me:null,init:function(){this.$me=$("#btn_new_host");this.click()},click:function(){this.$me.click(function(){return _commonModal.resetInputValues(),_commonModal.show(!0),!1})},active:function(n){n?this.$me.removeAttr("disabled"):this.$me.attr("disabled",!0)}},btnEditHost:{$me:null,init:function(){this.$me=$("#btn_edit_host");this.click();this.active(!1)},click:function(){this.$me.click(function(){var n=_connectionConfig.hostMain.listBlock.getHostItemValues(_connectionConfig.selectedHostId);return _commonModal.setInputValues(n),_commonModal.show(!1),!1})},active:function(n){n?this.$me.removeAttr("disabled"):this.$me.attr("disabled",!0)}},btnCopyHost:{$me:null,init:function(){this.$me=$("#btn_copy_host");this.click();this.active(!1)},click:function(){this.$me.click(function(){var n=_connectionConfig.selectedHostId;return _connectionConfig.hostMain.listBlock.checkHostItem(n)?_copyHostModal.show():alert("コピーするホストを正しく選択してください！"),!1})},success:function(n){n!=null&&_connectionConfig.hostMain.listBlock.addNewHostItem(n)},active:function(n){n?this.$me.removeAttr("disabled"):this.$me.attr("disabled",!0)}},btnRemoveHost:{$me:null,init:function(){this.$me=$("#btn_remove_host");this.click();this.active(!1)},click:function(){this.$me.click(function(){var n=_connectionConfig.selectedHostId,t;return _connectionConfig.hostMain.listBlock.checkHostItem(n)?confirm("ホスト「"+_connectionConfig.hostMain.listBlock.getHostItemName(n)+"」を削除します")&&(_loading.$me.fadeIn(),t=_connectionConfig.form.getSerializeArray(),t.push({name:"selectHostId",value:n}),_ajax.call("POST","/BGHost/RemoveHost",t,function(n){if(n!=null&&n.Result=="success"){var t=n.ResponseData.hostId;_connectionConfig.hostMain.listBlock.$me.find('li[data-hostid="'+t+'"]').remove();_connectionConfig.reset();typeof _ftpControlBlock!="undefined"&&_ftpControlBlock.hostMenuBlock.reset()}},!0),_loading.$me.fadeOut()):alert("削除ホストを正しく選択してください！"),!1})},active:function(n){n?this.$me.removeAttr("disabled"):this.$me.attr("disabled",!0)}},reset:function(){_connectionConfig.selectedHostId=null;_connectionConfig.activateAllBtn(!1)},activateAllBtn:function(n){n&&_connectionConfig.btnNewHost.active(n);_connectionConfig.btnEditHost.active(n);_connectionConfig.btnCopyHost.active(n);_connectionConfig.btnRemoveHost.active(n);_connectionConfig.btnConnect.active(n)},btnConnect:{$me:null,init:function(){this.$me=$("#btn_connect");this.click();this.active(!1)},click:function(){this.$me.click(function(){var n=_connectionConfig.form.getSerializeArray();return n.push({name:"selectHostId",value:_connectionConfig.selectedHostId}),_ajax.call("POST","/BGFTP/Connect",n,function(n){n!=null&&n.Result=="success"&&(window.location.href="/FTP/")},!0),!1})},active:function(n){n?this.$me.removeAttr("disabled"):this.$me.attr("disabled",!0)}}};
//# sourceMappingURL=Connect.min.js.map
